[gd_scene load_steps=24 format=3 uid="uid://bfqty2lqku5lg"]

[ext_resource type="Script" path="res://scenes/enemy/enemy.gd" id="1_dy6i0"]
[ext_resource type="PackedScene" uid="uid://l0ocmanq12py" path="res://assets/blender/bot1.blend" id="1_fabgi"]
[ext_resource type="Script" path="res://scenes/enemy/enemyVisual.gd" id="1_ossjd"]
[ext_resource type="PackedScene" uid="uid://c6n7gtrebkw2f" path="res://scenes/common/gizmoBilliboard.tscn" id="2_0dv6n"]
[ext_resource type="PackedScene" uid="uid://c201w1smj62xl" path="res://assets/blender/bot2.blend" id="2_hh7p6"]
[ext_resource type="PackedScene" uid="uid://dewcxax5f0ln3" path="res://assets/blender/bot3.blend" id="3_0siqn"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pfg55"]
animation = &"attack"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_mtb62"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7bwv2"]
animation = &"walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3sj27"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_wxksk"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bu2pa"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5b2eb"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_d6nt4"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_yeqjt"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5ceqo"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_oy34n"]
states/End/position = Vector2(670, 174)
states/Start/position = Vector2(199, 174)
states/attack/node = SubResource("AnimationNodeAnimation_pfg55")
states/attack/position = Vector2(381, 70)
states/idle/node = SubResource("AnimationNodeAnimation_mtb62")
states/idle/position = Vector2(581, 70)
states/walk/node = SubResource("AnimationNodeAnimation_7bwv2")
states/walk/position = Vector2(381, 174)
transitions = ["attack", "walk", SubResource("AnimationNodeStateMachineTransition_3sj27"), "walk", "attack", SubResource("AnimationNodeStateMachineTransition_wxksk"), "walk", "idle", SubResource("AnimationNodeStateMachineTransition_bu2pa"), "idle", "walk", SubResource("AnimationNodeStateMachineTransition_5b2eb"), "Start", "walk", SubResource("AnimationNodeStateMachineTransition_d6nt4"), "attack", "idle", SubResource("AnimationNodeStateMachineTransition_yeqjt"), "idle", "attack", SubResource("AnimationNodeStateMachineTransition_5ceqo")]
graph_offset = Vector2(67, -28)

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_rus0s"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_g6yab"]
graph_offset = Vector2(-239.554, -7.8042)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_oy34n")
nodes/StateMachine/position = Vector2(-80, 140)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_rus0s")
nodes/TimeScale/position = Vector2(140, 140)
nodes/output/position = Vector2(360, 160)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"StateMachine"]

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_2s6xo"]

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_o473m"]

[sub_resource type="AnimationNodeStateMachinePlayback" id="AnimationNodeStateMachinePlayback_0wmlk"]

[sub_resource type="BoxShape3D" id="BoxShape3D_xm4xx"]
size = Vector3(0.7, 1.8, 0.7)

[node name="enemy" type="PathFollow3D"]
loop = false
script = ExtResource("1_dy6i0")
damageBilliboard = ExtResource("2_0dv6n")

[node name="timerAttack" type="Timer" parent="."]
wait_time = 5.0

[node name="enemyVisual" type="Node3D" parent="."]
script = ExtResource("1_ossjd")

[node name="1" type="Node3D" parent="enemyVisual"]

[node name="bot1" parent="enemyVisual/1" instance=ExtResource("1_fabgi")]

[node name="Skeleton3D" parent="enemyVisual/1/bot1/Empty/Armature" index="0"]
bones/0/position = Vector3(8.42828e-16, 0.560496, 0.0567328)
bones/1/rotation = Quaternion(0.70388, -0.0674691, -0.703881, 0.0674722)
bones/2/rotation = Quaternion(-1.61305e-08, -4.40776e-07, 0.000712276, 1)
bones/3/position = Vector3(0.0630626, 1.5949, 2.84212e-07)
bones/3/rotation = Quaternion(1.22682e-06, -1.18407e-06, 0.458032, 0.888936)
bones/7/rotation = Quaternion(0.657187, -0.26097, 0.657187, -0.260972)
bones/8/rotation = Quaternion(-5.74085e-06, 7.429e-07, -0.840899, 0.541193)
bones/9/position = Vector3(-0.19074, 1.56077, 9.92472e-07)
bones/9/rotation = Quaternion(7.83813e-06, -2.14823e-06, 0.318834, 0.947811)

[node name="Cube003" parent="enemyVisual/1/bot1/Empty/Armature/Skeleton3D" index="0"]
transform = Transform3D(1, -1.49023e-06, 3.28423e-06, 1.23992e-06, 0.996155, 0.0876143, -3.28311e-06, -0.0876145, 0.996154, 1.77719, -2.99701, 1.25021)
bone_idx = 4

[node name="Cube002" parent="enemyVisual/1/bot1/Empty/Armature/Skeleton3D" index="1"]
transform = Transform3D(-2.20355e-06, -4.37153e-06, 1, -0.130977, 0.991386, 4.04802e-06, -0.991385, -0.130977, -2.63564e-06, 1.75585, -1.07793, 0.691488)
bone_idx = 5

[node name="Cylinder" parent="enemyVisual/1/bot1/Empty/Armature/Skeleton3D" index="2"]
transform = Transform3D(-1.49218e-06, 1, 4.26198e-06, -0.245264, 3.79233e-06, -0.969456, -0.969456, -2.3774e-06, 0.245264, 1.75811, 0.744677, 0.277204)
bone_idx = 6

[node name="Cube001" parent="enemyVisual/1/bot1/Empty/Armature/Skeleton3D" index="3"]
transform = Transform3D(1, 6.49417e-06, 8.10649e-06, -2.27831e-06, 0.894488, -0.447092, -1.01515e-05, 0.447092, 0.894488, -1.77718, -1.68805, 0.295727)
bone_idx = 10

[node name="Cube" parent="enemyVisual/1/bot1/Empty/Armature/Skeleton3D" index="4"]
transform = Transform3D(-5.70976e-06, 7.7321e-06, 1, -0.924862, 0.380302, -8.24284e-06, -0.380303, -0.924862, 5.034e-06, -1.75584, -0.461959, -1.08562)
bone_idx = 11

[node name="Cylinder003" parent="enemyVisual/1/bot1/Empty/Armature/Skeleton3D" index="5"]
transform = Transform3D(-7.47457e-07, 1, 2.88331e-06, 0.643719, 2.65152e-06, -0.765262, -0.765262, 1.3251e-06, -0.643719, -1.75811, 0.86942, -0.0100278)
bone_idx = 12

[node name="Cylinder001" parent="enemyVisual/1/bot1/Empty/Armature/Skeleton3D" index="6"]
transform = Transform3D(1, 1.4211e-14, -2.84217e-14, -1.4211e-14, 1, -3.37508e-13, 1.42109e-14, 3.37508e-13, 1, -5.77083e-14, 3.78368, 1.29405)
bone_idx = 15

[node name="Cylinder002" parent="enemyVisual/1/bot1/Empty/Armature/Skeleton3D" index="7"]
transform = Transform3D(1, 1.4211e-14, -2.84217e-14, -1.4211e-14, 1, -3.37508e-13, 1.42109e-14, 3.37508e-13, 1, -1.10444e-13, 3.21945, 2.86739)
bone_idx = 16

[node name="Roundcube" parent="enemyVisual/1/bot1/Empty/Armature/Skeleton3D" index="8"]
transform = Transform3D(1, 1.42109e-14, -4.26326e-14, -1.42109e-14, 1, -3.55271e-15, 1.42109e-14, 3.55271e-15, 1, -5.37442e-15, 1.48609, -9.31323e-08)
bone_idx = 17

[node name="AnimationTree" type="AnimationTree" parent="enemyVisual/1"]
tree_root = SubResource("AnimationNodeBlendTree_g6yab")
anim_player = NodePath("../bot1/AnimationPlayer")
active = true
parameters/StateMachine/playback = SubResource("AnimationNodeStateMachinePlayback_2s6xo")
parameters/TimeScale/scale = 1.0

[node name="2" type="Node3D" parent="enemyVisual"]

[node name="bot3" parent="enemyVisual/2" instance=ExtResource("3_0siqn")]

[node name="Skeleton3D" parent="enemyVisual/2/bot3/root/Armature" index="0"]
bones/0/position = Vector3(0, 3.271, 0)
bones/1/rotation = Quaternion(0.692021, 0.145282, -0.692021, -0.145282)
bones/2/rotation = Quaternion(-7.53847e-09, 4.8544e-09, 0.433211, 0.901293)
bones/3/position = Vector3(0.0858963, 1.50503, -3.5803e-08)
bones/3/rotation = Quaternion(-1.50592e-08, 1.22409e-07, 0.260981, 0.965344)
bones/7/rotation = Quaternion(0.619816, -0.340335, 0.619816, -0.340335)
bones/8/rotation = Quaternion(-5.95551e-09, -3.18758e-08, -0.843913, 0.53648)
bones/9/position = Vector3(-0.0623862, 1.42394, -7.80846e-08)
bones/9/rotation = Quaternion(7.4821e-08, -1.14516e-07, 0.304824, 0.952409)
bones/14/position = Vector3(1.54737, 0.0228315, 0.318166)
bones/14/rotation = Quaternion(0.702108, -0.567314, -0.337303, 0.267257)
bones/15/rotation = Quaternion(0.162348, -0.921519, -0.352538, 0.0127648)
bones/21/rotation = Quaternion(0.673072, -0.476059, 0.463427, -0.324926)
bones/22/rotation = Quaternion(-0.679934, 0.0312583, -0.662602, 0.312524)

[node name="Cube003" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="0"]
transform = Transform3D(1, 9.56297e-08, -5.08761e-08, -1.30873e-07, 0.999969, 0.00785151, 2.8863e-08, -0.0078516, 0.999969, 1.77717, 0.184849, 0.207453)
bone_idx = 4

[node name="Cube002" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="1"]
transform = Transform3D(-3.6482e-08, 4.08749e-08, 1, -0.4481, 0.893983, -5.28891e-08, -0.893983, -0.4481, -1.42982e-08, 1.75584, 2.06166, -0.743527)
bone_idx = 5

[node name="Cylinder" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="2"]
transform = Transform3D(-2.04891e-08, 1, 0, 0.436676, 9.73788e-09, -0.899618, -0.899618, -2.217e-08, -0.436676, 1.75811, 3.7022, 0.00896955)
bone_idx = 6

[node name="Cube001" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="3"]
transform = Transform3D(1, -9.58471e-08, 1.17858e-07, 1.45967e-07, 0.81551, -0.578743, -2.64734e-08, 0.578743, 0.815509, -1.77717, 1.29261, -0.432528)
bone_idx = 10

[node name="Cube" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="4"]
transform = Transform3D(5.45683e-08, -1.68669e-09, 1, -0.834478, 0.551041, 3.0471e-08, -0.551041, -0.834478, 3.51528e-09, -1.75584, 2.7661, -1.49348)
bone_idx = 11

[node name="Cylinder003" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="5"]
transform = Transform3D(5.47461e-08, 1, 8.93854e-08, 0.863578, -5.02932e-08, -0.504215, -0.504215, 3.19891e-08, -0.863578, -1.75811, 3.65389, -0.0316482)
bone_idx = 12

[node name="Cylinder006" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="6"]
transform = Transform3D(-0.979439, -0.167849, -0.111917, 0.112073, 0.00857648, -0.993663, 0.167746, -0.985775, 0.0104111, 0.100481, 4.96952, 2.08144)
bone_idx = 16

[node name="Cylinder005" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="7"]
transform = Transform3D(-0.616338, 0.776883, -0.128764, -0.213457, -0.00742587, 0.976924, 0.757999, 0.629601, 0.170408, 1.50436, 5.47413, 0.372319)
bone_idx = 17

[node name="Cylinder001" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="8"]
transform = Transform3D(1.4862, -4.96308e-24, 4.96308e-24, 4.96308e-24, 1.4862, 2.43679e-33, -4.96308e-24, -2.43679e-33, 1.4862, 1.94388e-15, 8.3075, 0.830023)
bone_idx = 19

[node name="Cube004" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="9"]
transform = Transform3D(-0.225181, -0.56372, -0.794677, -0.153686, 0.825966, -0.542366, 0.962119, 1.88251e-24, -0.272628, 0.811841, 7.53394, 1.11335)
bone_idx = 20

[node name="Cylinder004" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="10"]
transform = Transform3D(-0.091847, 0.0461273, 0.994704, -0.0778947, -0.996198, 0.0390041, 0.992722, -0.0738998, 0.095091, -2.19946, 5.00412, -2.09284)
bone_idx = 23

[node name="Cylinder008" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="11"]
transform = Transform3D(0.373635, -1.2219e-06, -3.1013e-07, -2.51457e-07, 5.38863e-06, -0.373635, 1.30385e-07, 2.91316, 6.37607e-07, -2.52197, 5.33069, 2.52892)
bone_idx = 24

[node name="Cylinder002" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="12"]
transform = Transform3D(-0.339685, 0.933207, 0.117207, -0.335581, -0.0038387, -0.942003, -0.878635, -0.359317, 0.314471, -1.4626, 5.77207, -0.126766)
bone_idx = 25

[node name="Roundcube" parent="enemyVisual/2/bot3/root/Armature/Skeleton3D" index="13"]
transform = Transform3D(1, 0, -7.10543e-15, 0, 1, 0, 7.10543e-15, 0, 1, 0, 4.30791, -3.22489e-15)
bone_idx = 26

[node name="AnimationTree" type="AnimationTree" parent="enemyVisual/2"]
tree_root = SubResource("AnimationNodeBlendTree_g6yab")
anim_player = NodePath("../bot3/AnimationPlayer")
active = true
parameters/StateMachine/playback = SubResource("AnimationNodeStateMachinePlayback_o473m")
parameters/TimeScale/scale = 1.0

[node name="3" type="Node3D" parent="enemyVisual"]

[node name="bot2" parent="enemyVisual/3" instance=ExtResource("2_hh7p6")]

[node name="Skeleton3D" parent="enemyVisual/3/bot2/Empty/Armature" index="0"]
bones/0/position = Vector3(-1.73688e-08, 3.71599, -1.54234e-08)
bones/1/rotation = Quaternion(0.701949, -0.0852509, -0.701949, 0.0852506)
bones/2/rotation = Quaternion(-1.84742e-08, -8.25794e-08, 0.0841137, 0.996456)
bones/3/position = Vector3(-0.122344, 1.58634, 3.98926e-08)
bones/3/rotation = Quaternion(-8.0671e-08, 7.47726e-08, 0.413722, 0.910403)
bones/8/rotation = Quaternion(0.705847, -0.0421924, -0.705847, 0.0421923)
bones/9/rotation = Quaternion(-8.16567e-08, 1.00143e-07, 0.437048, 0.899438)
bones/12/rotation = Quaternion(0.368468, -6.41586e-15, 2.98743e-15, 0.92964)
bones/15/rotation = Quaternion(0.705847, 0.0421924, 0.705847, 0.0421923)
bones/16/rotation = Quaternion(-8.16567e-08, -1.00143e-07, -0.437048, 0.899438)
bones/20/rotation = Quaternion(0.626341, -0.328171, 0.626343, -0.328169)
bones/21/rotation = Quaternion(2.84855e-06, 3.7843e-06, -0.861969, 0.506961)
bones/22/position = Vector3(-0.00577347, 1.77519, -8.1601e-08)
bones/22/rotation = Quaternion(-1.63469e-06, -3.17605e-06, 0.212321, 0.9772)

[node name="Cube005" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="0"]
transform = Transform3D(1, 1.29461e-07, 2.43234e-07, -1.85683e-07, 0.996041, 0.0888927, -3.96019e-07, -0.0888926, 0.996041, 1.31423, 0.285165, 1.16033)
bone_idx = 4

[node name="Cube004" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="1"]
transform = Transform3D(-5.74449e-07, 2.43313e-07, 1, -0.320098, 0.947384, -4.13856e-07, -0.947384, -0.320098, -5.66944e-07, 1.2929, 2.15477, 0.326731)
bone_idx = 5

[node name="Cylinder005" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="2"]
transform = Transform3D(-5.03302e-07, 1, -1.20019e-07, -0.122638, -1.78326e-07, -0.992451, -0.992451, -5.85722e-07, 0.122638, 1.29517, 3.9603, 0.0958961)
bone_idx = 6

[node name="Cylinder010" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="3"]
transform = Transform3D(1.40261e-07, 1, -1.63281e-07, -0.51181, -8.70816e-08, 0.859098, 0.859097, -1.14149e-07, 0.51181, 2.96468, 5.21826, 0.216619)
bone_idx = 10

[node name="Cylinder009" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="4"]
transform = Transform3D(1.53058e-07, 1, 2.9725e-07, -1, 1.02332e-07, -2.82191e-07, -3.3481e-07, -4.93828e-07, 1, 2.96456, 7.82559, 1.19861e-06)
bone_idx = 11

[node name="Roundcube003" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="5"]
transform = Transform3D(1, -4.55733e-15, 1.46956e-14, 6.8875e-15, 1, 5.96046e-08, -2.81395e-14, -5.96046e-08, 1, -1.73688e-08, 9.02863, 2.91684)
bone_idx = 13

[node name="Cylinder008" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="6"]
transform = Transform3D(1, -4.55733e-15, 1.46956e-14, 6.8875e-15, 1, 5.96046e-08, -2.81395e-14, -5.96046e-08, 1, -1.73687e-08, 8.64327, 3.98793)
bone_idx = 14

[node name="Cylinder007" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="7"]
transform = Transform3D(1.87565e-07, 1, 3.42095e-07, -0.51181, -1.7173e-07, 0.859098, 0.859098, -8.70616e-08, 0.511811, -2.96468, 5.21826, 0.216619)
bone_idx = 17

[node name="Cylinder006" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="8"]
transform = Transform3D(1.15164e-07, 1, -1.7804e-07, -1, 1.34969e-07, -3.71132e-07, -4.53088e-07, 2.83943e-07, 1, -2.96456, 7.82559, 1.19861e-06)
bone_idx = 18

[node name="Roundcube001" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="9"]
transform = Transform3D(1, -7.44485e-15, 8.71938e-15, 9.77502e-15, 1, -1.49012e-08, -2.21633e-14, 1.49012e-08, 1, -1.73688e-08, 6.62776, 1.04795)
bone_idx = 19

[node name="Cube007" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="10"]
transform = Transform3D(1, 2.06126e-06, -8.07766e-06, -5.56419e-06, 0.882772, -0.469802, 6.06981e-06, 0.469802, 0.882771, -1.31425, 1.71028, -0.112632)
bone_idx = 23

[node name="Cube006" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="11"]
transform = Transform3D(5.34893e-06, 6.43435e-06, 1, -0.856646, 0.515905, 1.33066e-06, -0.515905, -0.856646, 8.17717e-06, -1.2929, 3.19251, -1.54779)
bone_idx = 24

[node name="Cylinder004" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="12"]
transform = Transform3D(4.06954e-06, 1, -1.20761e-06, 0.88384, -4.03959e-06, -0.467789, -0.467789, 8.45915e-07, -0.88384, -1.29517, 4.03656, -0.0363446)
bone_idx = 25

[node name="Roundcube" parent="enemyVisual/3/bot2/Empty/Armature/Skeleton3D" index="13"]
transform = Transform3D(1, -1.77636e-14, 4.26326e-14, 1.77636e-14, 1, 0, -5.68434e-14, 0, 1, -1.73688e-08, 4.47971, -3.03246e-08)
bone_idx = 26

[node name="AnimationTree" type="AnimationTree" parent="enemyVisual/3"]
tree_root = SubResource("AnimationNodeBlendTree_g6yab")
anim_player = NodePath("../bot2/AnimationPlayer")
active = true
parameters/StateMachine/playback = SubResource("AnimationNodeStateMachinePlayback_0wmlk")
parameters/TimeScale/scale = 1.0

[node name="CharacterBody3D" type="CharacterBody3D" parent="."]
collision_layer = 5

[node name="CollisionShape3D" type="CollisionShape3D" parent="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.909179, 0)
shape = SubResource("BoxShape3D_xm4xx")

[editable path="enemyVisual/1/bot1"]
[editable path="enemyVisual/2/bot3"]
[editable path="enemyVisual/3/bot2"]
